!function(){"undefined"==typeof Range||Range.prototype.createContextualFragment||(Range.prototype.createContextualFragment=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.outerHTML=e,t});var e,t=function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,i=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){var a=new RegExp("MSIE (\\d+\\.\\d+);");a.test(e);var r=parseFloat(RegExp.$1);return 7==r?7:8==r?8:9==r?9:10==r?10:6}return n?"edge":i?11:-1}();e=9===t||10===t?"<p></p>":"<p><br></p>",setTimeout(function(){var e={".easyEditor":["text-align: left","-webkit-user-select: auto","-moz-user-select: auto","-ms-user-select: auto","-o-user-select: auto","user-select: auto","overflow-y: auto","word-break: break-all","word-wrap: break-word"],".easyEditor img":["-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","-o-user-select: none","user-select: none","cursor: default","resize: none","vertical-align: middle"],".easyEditor input":["text-align: center","white-space: nowrap","overflow: hidden","border:0px","outline:0px","background-color:transparent","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","-o-user-select: none","user-select: none","cursor: default","resize: none"],".easyEditor[contentEditable=true]:not(:focus):before":["color:#aaa","content:attr(placeholder)"]},t="";for(var n in e){t+=n+"{";for(var i=0;i<e[n].length;i++)t+=e[n][i]+";";t+="}"}var a=document.getElementById("easyEditor-style");if(null==a){var r=document.createElement("style");r.id="easyEditor-style",r.type="text/css",r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r=null}else a.innerHTML=t},1);var n,i=function(e,t,n){if(!e.editEvent)return!1;var i=t.split(".")[0],a=t.split(".")[1]||"all";if(!e.editEvent[a+i])return!1;var r=e.editEvent[a+i];e.addEventListener?(n=void 0!=n&&n,e.removeEventListener(i,r,n)):e.attachEvent?e.detachEvent("on"+i,r):e["on"+i]=null},a=function(e,t,n,a){e.editEvent||(e.editEvent=new Object);var r=t.split(".")[0],o=t.split(".")[1]||"all";return!!r&&(void 0!=e.editEvent[o+r]&&i(e,t),e.editEvent[o+r]=n,void(e.addEventListener?(a=void 0!=a&&a,e.addEventListener(r,n,a)):e.attachEvent?e.attachEvent("on"+r,n):e["on"+r]=n))},r=function(e,t){var n=(e.getAttribute("class"),(e.getAttribute("class")||"").split(" "));n.push(t),e.setAttribute("class",n.join(" "))},o=function(e){var t=e.getBoundingClientRect(),n=document.documentElement.clientLeft,i=document.documentElement.clientTop;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.right-t.left,height:t.bottom-t.top}},s=function(e){var t=e.parentNode;t&&t.removeChild(e)},d=function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)};window.getSelection?n=window.getSelection():document.selection&&(n=document.selection.createRange());var l=function(){var e;return e=n,n.getRangeAt&&(e=n.getRangeAt(0)),e},c=function(e){window.getSelection?(n.removeAllRanges(),n.addRange(e)):document.selection&&e.select()},u=function(){var e=this.editbox;try{document.execCommand("AutoUrlDetect",!1,!1)}catch(e){}a(e,"paste.filter",function(e){var e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=!1;var t,n=null;if(n=window.clipboardData&&clipboardData.setData?window.clipboardData.getData("text"):(e.originalEvent||e).clipboardData.getData("text/plain"),document.body.createTextRange){if(document.selection)t=document.selection.createRange();else if(window.getSelection){var i=window.getSelection(),a=i.getRangeAt(0),r=document.createElement("span");r.innerHTML="",a.deleteContents(),a.insertNode(r),t=document.body.createTextRange(),t.moveToElementText(r),r.parentNode.removeChild(r)}t.text=n,t.collapse(!1),t.select()}else document.execCommand("insertText",!1,n)})},h=function(t){var n=t.innerHTML;0!==n.length&&"<br>"!==n||(t.innerHTML=e)},v=function(){var t=this.editbox;if(this.placeholderContent&&""!=this.placeholderText){var n=t.innerHTML;n===e?t.setAttribute("placeholder",this.placeholderText):t.removeAttribute("placeholder")}else this.placeholderContent||t.removeAttribute("placeholder")},g=function(){var e=this;a(e.editbox,"click.edit",function(){setTimeout(function(){e.saveRange()},1)}),a(e.editbox,"keypress.edit",function(){e.saveRange()}),a(e.editbox,"keyup.edit",function(t){e.saveRange();var t=t||window.event;8===t.keyCode&&h(e.editbox)}),a(e.editbox,"blur.edit",function(){v.call(e)}),e.editbox.dragOnEdit=!1,a(e.editbox,"dragstart.edit",function(t){e.editbox.dragOnEdit=!0}),a(e.editbox,"dragend.edit",function(t){e.editbox.dragOnEdit=!1}),a(e.editbox,"drop.edit",function(t){if(e.editbox.dragOnEdit)setTimeout(function(){e.saveRange()},1),e.editbox.dragOnEdit=!1;else{var t=t||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1}}),e.editbox.mousedown=!1,e.editbox.isCanSave=!1,a(e.editbox,"mousedown.edit",function(){e.editbox.mousedown=!0}),a(e.editbox,"mouseup.edit",function(){e.editbox.mousedown=!1}),a(e.editbox,"mouseleave.edit",function(){e.editbox.mousedown?e.editbox.isCanSave=!0:e.editbox.isCanSave=!1}),a(document,"mouseup.edit",function(){e.editbox.isCanSave&&e.saveRange(),e.editbox.mousedown=!1,e.editbox.isCanSave=!1})},f=function(e,t){if(e.dataset)for(var n in t)e.dataset[n]=t[n];else e.dataset=t},m=function(e){for(var t=e.cloneNode(!0),n=t.getElementsByTagName("img"),i=e.getElementsByTagName("img"),a=t.getElementsByTagName("input"),r=e.getElementsByTagName("input"),o=0;o<i.length;o++){var s=JSON.parse(JSON.stringify(i[o].dataset));f(n[o],s)}for(var o=0;o<r.length;o++){var s=JSON.parse(JSON.stringify(r[o].dataset));f(a[o],s)}return t},p=function(e){this.editbox=document.getElementById(e),this.editbox.spellcheck=!1,this.editbox.contentEditable="true",r(this.editbox,"easyEditor"),u.call(this),g.call(this),h(this.editbox),this.focus=function(){return this.editbox.focus(),this.saveRange(),this},this.blur=function(){return this.editbox.blur(),this},this.setPosition=function(e){if("start"==e||"end"==e){var t=this.editbox.firstChild;if(null==t)this.blur().focus();else{var i=l();"start"==e?(i.setStartBefore(t),i.setEndBefore(t)):"end"==e&&(i.setStartAfter(this.editbox.lastChild),i.setEndAfter(this.editbox.lastChild)),n.removeAllRanges(),n.addRange(i),this.saveRange()}}else console.error("[EasyEditor] position is not defined");return this},this.selectAll=function(){var e=this.editbox.firstChild;if(null!=e&&null!=this.range){var t=l();t.setStartBefore(e),t.setEndAfter(this.editbox.lastChild),n.removeAllRanges(),n.addRange(t),this.saveRange()}else this.focus();return this},this.clearAll=function(){return this.selectAll().clearSelect(),this},this.clearSelect=function(){return null!=this.range?(this.range.deleteContents(),this.restoreSaveRange(),h(this.editbox)):this.focus(),this},this.changeLine=function(){return this.insertHTML("<br>"),this},this.placeholder=function(e){return this.placeholderContent=!0,this.placeholderText=e||"",v.call(this),this},this.closePlaceholder=function(){return this.placeholderContent=!1,this.placeholderText="",v.call(this),this},this.insertEmoji=function(e){if(void 0==e.src)return console.error("[EasyEditor] emoji src is not define"),!1;e.remark||(e.remark=""),this.insertHTML('<img id="easy-editor-save" src="'+e.src+'" easy-remark="'+e.remark+'" />');var t=document.getElementById("easy-editor-save");return t.dataset?t.dataset.saveValue=e.remark:t.dataset={saveValue:e.remark},t.removeAttribute("id"),e.afterInsert&&e.afterInsert.call(this),this},this.insertBlock=function(e){this.insertHTML('<br id="changeLinear"/><span id="easyEditorSaveWidth">'+e.text+"</span>");var t=document.getElementById("easyEditorSaveWidth"),n=o(t).width;s(t),s(document.getElementById("changeLinear")),e.color=void 0==e.color?"":"color:"+e.color+";",this.insertHTML('<input id="easy-editor-save" type="text" disabled="disabled" value="'+e.text+'" style="width:'+n+"px;"+e.color+'">');var i=document.getElementById("easy-editor-save");return i.dataset?i.dataset.saveValue=e.text:i.dataset={saveValue:e.text},i.removeAttribute("id"),e.afterInsert&&e.afterInsert.call(this),this},this.getContent=function(e){for(var t=e.emojiSign||"|",n=e.blockSign||"|",i=m(this.editbox),a=i.getElementsByTagName("img"),r=i.getElementsByTagName("input"),o=i.getElementsByTagName("div"),l=i.getElementsByTagName("p"),c=0;c<a.length;c++){var u=a[c],h=document.createTextNode(t+u.dataset.saveValue+t);u.parentNode;d(h,u)}for(var c=0;c<r.length;c++){var u=r[c],h=document.createTextNode(n+u.dataset.saveValue+n);u.parentNode;d(h,u)}for(var c=0;c<o.length;c++)if(c!=o.length-1){var u=o[c],h=document.createElement("br");d(h,u)}else"BR"===o[c].lastChild.tagName&&s(o[c].lastChild);for(var c=0;c<l.length;c++)if(c!=l.length-1){var u=l[c],h=document.createElement("br");d(h,u)}else"BR"===l[c].lastChild.tagName&&s(l[c].lastChild);var v=i.innerHTML;return v.replace(/<(?!\/?BR)[^<>]*>/gi,"")}};p.prototype={placeholderText:"",placeholderContent:!1,range:null,getSelection:function(){return n},getRangeObject:function(){return l()},saveRange:function(){var e=l();return this.range=e,this},insertHTML:function(e){null===this.range&&this.focus().saveRange();var t=this.range,i=t.createContextualFragment(e),a=i.lastChild;return t.deleteContents(),t.insertNode(i),t.setStartAfter(a),n.removeAllRanges(),n.addRange(t),this.saveRange(),this},restoreSaveRange:function(){var e=this.range;return null==e?console.error("[EasyEditor] range is empty"):c(e),this}},window.easyEditor=function(e){return void 0==e?void console.error("[EasyEditor] editor id is not defined"):new p(e)}}();